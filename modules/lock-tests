Files:
tests/test-lock.c

Depends-on:

configure.ac:
dnl Checks for special libraries for the tests/test-lock test.
dnl On some systems, sched_yield is in librt, rather than in libpthread.
LIBSCHED=
if test $gl_threads_api = posix; then
  AC_CHECK_LIB(rt, sched_yield, [LIBSCHED=-lrt])
fi
AC_SUBST([LIBSCHED])

Makefile.am:
TESTS += test-lock$(EXEEXT)
check_PROGRAMS += test-lock
test_lock_LDADD = @LIBMULTITHREAD@ @LIBSCHED@ $(LDADD)

